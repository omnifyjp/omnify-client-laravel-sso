# SSO User Schema - User model for SSO integration
# Contains basic user info (cached from Console) and SSO fields

kind: object

displayName:
  ja: ユーザー
  en: User
  vi: Người dùng

options:
  timestamps: true
  idType: Uuid

properties:
  # Basic user info (cached from Console)
  name:
    type: String
    displayName:
      ja: 名前
      en: Name
      vi: Tên

  email:
    type: String
    unique: true
    displayName:
      ja: メールアドレス
      en: Email
      vi: Email

  # SSO fields
  console_user_id:
    type: Uuid
    unique: true
    nullable: true
    displayName:
      ja: Console User ID
      en: Console User ID
      vi: Console User ID
    description:
      ja: Console側のユーザーID
      en: User ID from Console SSO
      vi: ID người dùng từ Console SSO

  console_access_token:
    type: Text
    nullable: true
    displayName:
      ja: Console Access Token
      en: Console Access Token
      vi: Console Access Token
    description:
      ja: Console APIアクセス用トークン（暗号化）
      en: Encrypted token for Console API access
      vi: Token mã hóa để truy cập Console API

  console_refresh_token:
    type: Text
    nullable: true
    displayName:
      ja: Console Refresh Token
      en: Console Refresh Token
      vi: Console Refresh Token
    description:
      ja: トークン更新用リフレッシュトークン（暗号化）
      en: Encrypted refresh token for token renewal
      vi: Token làm mới mã hóa

  console_token_expires_at:
    type: Timestamp
    nullable: true
    displayName:
      ja: Console Token有効期限
      en: Console Token Expiry
      vi: Hạn Token Console
    description:
      ja: アクセストークンの有効期限
      en: Access token expiration time
      vi: Thời gian hết hạn của token truy cập

  roles:
    type: Association
    relation: ManyToMany
    target: Role
    joinTable: role_user
    owning: true
    displayName:
      ja: ロール
      en: Roles
      vi: Vai trò
    description:
      ja: ユーザーのロール（複数可）
      en: User's roles (multiple allowed)
      vi: Vai trò của người dùng (có thể nhiều)
