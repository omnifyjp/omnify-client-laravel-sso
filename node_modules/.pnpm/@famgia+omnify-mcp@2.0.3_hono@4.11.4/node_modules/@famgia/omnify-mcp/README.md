# @famgia/omnify-mcp

MCP (Model Context Protocol) Server for Omnify - enables AI assistants like Claude to create and validate Omnify schemas.

## Features

- **omnify_create_schema** - Generate schema YAML from structured input
- **omnify_validate_schema** - Validate schema YAML content
- **omnify_get_types** - Get documentation for property types
- **omnify_get_relationships** - Get documentation for relationship types
- **omnify_get_examples** - Get example schemas for common use cases

## Installation

### For Claude Code

Add to your Claude Code MCP settings (`~/.claude/claude_desktop_config.json`):

```json
{
  "mcpServers": {
    "omnify": {
      "command": "npx",
      "args": ["@famgia/omnify-mcp"]
    }
  }
}
```

### For Claude Desktop

Add to your Claude Desktop config:

```json
{
  "mcpServers": {
    "omnify": {
      "command": "npx",
      "args": ["@famgia/omnify-mcp"]
    }
  }
}
```

### Global Installation

```bash
npm install -g @famgia/omnify-mcp
```

Then use `omnify-mcp` as the command.

## Available Tools

### omnify_create_schema

Create an Omnify schema YAML file from structured input.

**Example:**
```
Create a User schema with name, email (unique), password, and posts relation
```

**Parameters:**
- `name` (required): Schema name in PascalCase
- `kind`: 'object' or 'enum' (default: 'object')
- `displayName`: String or locale map for i18n
- `group`: Schema group for organization
- `properties`: Property definitions
- `values`: Enum values (for kind: enum)
- `options`: Schema options (softDelete, timestamps, etc.)

### omnify_validate_schema

Validate schema YAML content and get errors/warnings.

**Parameters:**
- `yaml_content` (required): YAML content to validate

### omnify_get_types

Get documentation for all property types (String, Int, Association, etc.)

### omnify_get_relationships

Get documentation for relationship types (OneToMany, ManyToMany, polymorphic, etc.)

### omnify_get_examples

Get example schemas for User, Post, Category, and Enum.

## Example Usage with Claude

```
User: Create a schema for a blog post with title, content, status enum, author relation

Claude: [Uses omnify_create_schema tool]

Generated Schema: Post

```yaml
name: Post
displayName:
  ja: 投稿
  en: Post
options:
  softDelete: true
properties:
  title:
    type: String
    displayName:
      ja: タイトル
      en: Title
  content:
    type: LongText
  status:
    type: EnumRef
    enum: PostStatus
    default: draft
  author:
    type: Association
    relation: ManyToOne
    target: User
    onDelete: CASCADE
```

Save to: schemas/blog/Post.yaml
```

## Resources

The server also provides resources that can be accessed:

- `omnify://docs/types` - Property types documentation
- `omnify://docs/relationships` - Relationships documentation
- `omnify://examples/all` - Example schemas

## JSON Schema

For IDE autocomplete in YAML files, use the JSON Schema:

```yaml
# yaml-language-server: $schema=./node_modules/.omnify/combined-schema.json
name: MySchema
properties:
  # IDE will provide autocomplete here
```

## Related Packages

- [@famgia/omnify](https://www.npmjs.com/package/@famgia/omnify) - Main package
- [@famgia/omnify-laravel](https://www.npmjs.com/package/@famgia/omnify-laravel) - Laravel generator
- [@famgia/omnify-types](https://www.npmjs.com/package/@famgia/omnify-types) - Type definitions

## License

MIT
